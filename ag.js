!function(t,e,i,a){var n="ontouchstart"in e,o=n?"touchstart":"mousedown",u=n?"touchmove":"mousemove",d=n?"touchcancel":"mouseup",l=function(t){var e=Math.floor(t/3600),i=Math.floor(t%3600/60),a=Math.ceil(t%3600%60);return(0==e?"":e>0&&e.toString().length<2?"0"+e+":":e+":")+(i.toString().length<2?"0"+i:i)+":"+(a.toString().length<2?"0"+a:a)},r=function(t){var e=i.createElement("audio");return!!(e.canPlayType&&e.canPlayType("audio/"+t.split(".").pop().toLowerCase()+";").replace(/no/,""))};t.fn.audioPlayer=function(e){var e=t.extend({classPrefix:"audioplayer",strPlay:"",strPause:"",strVolume:""},e),i={},a={playPause:"playpause",playing:"playing",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",mute:"mute",mini:"mini"};for(var s in a)i[s]=e.classPrefix+"-"+a[s];return this.each(function(){if("audio"!=t(this).prop("tagName").toLowerCase())return!1;var a=t(this),s=a.attr("src"),v=a.get(0).getAttribute("autoplay"),v=""===v||"autoplay"===v,m=a.get(0).getAttribute("loop"),m=""===m||"loop"===m,c=!1;void 0===s?a.find("source").each(function(){if(void 0!==(s=t(this).attr("src"))&&r(s))return c=!0,!1}):r(s)&&(c=!0);var f=t('<div class="'+e.classPrefix+'">'+(c?t("<div>").append(a.eq(0).clone()).html():'<embed src="'+s+'" width="0" height="0" volume="100" autostart="'+v.toString()+'" loop="'+m.toString()+'" />')+'<div class="'+i.playPause+'" title="'+e.strPlay+'"><a href="#">'+e.strPlay+"</a></div></div>"),$=c?f.find("audio"):f.find("embed"),$=$.get(0);if(c){f.find("audio").css({width:0,height:0,visibility:"hidden"}),f.append('<div class="'+i.time+" "+i.timeCurrent+'"></div><div class="'+i.bar+'"><div class="'+i.barLoaded+'"></div><div class="'+i.barPlayed+'"></div></div><div class="'+i.time+" "+i.timeDuration+'"></div><div class="'+i.volume+'"><div class="'+i.volumeButton+'" title="'+e.strVolume+'"><a href="#">'+e.strVolume+'</a></div><div class="'+i.volumeAdjust+'"><div><div></div></div></div></div>');var h=f.find("."+i.bar),p=f.find("."+i.barPlayed),y=f.find("."+i.barLoaded),g=f.find("."+i.timeCurrent),b=f.find("."+i.timeDuration),P=f.find("."+i.volumeButton),C=f.find("."+i.volumeAdjust+" > div"),_=0,w=function(t){theRealEvent=n?t.originalEvent.touches[0]:t,$.currentTime=Math.round($.duration*(theRealEvent.pageX-h.offset().left)/h.width())},L=function(t){theRealEvent=n?t.originalEvent.touches[0]:t,$.volume=Math.abs((theRealEvent.pageX-C.offset().left)/C.width())},x=setInterval(function(){$.buffered.length>0&&(y.width($.buffered.end(0)/$.duration*100+"%"),$.buffered.end(0)>=$.duration&&clearInterval(x))},100),E=$.volume,S=$.volume=.111;Math.round(1e3*$.volume)/1e3==S?$.volume=E:f.addClass(i.noVolume),b.html("&hellip;"),g.text(l(0)),$.addEventListener("loadeddata",function(){b.text(l($.duration)),C.find("div").width(100*$.volume+"%"),_=$.volume}),$.addEventListener("timeupdate",function(){g.text(l($.currentTime)),p.width($.currentTime/$.duration*100+"%")}),$.addEventListener("volumechange",function(){C.find("div").width(100*$.volume+"%"),$.volume>0&&f.hasClass(i.mute)&&f.removeClass(i.mute),$.volume<=0&&!f.hasClass(i.mute)&&f.addClass(i.mute)}),$.addEventListener("ended",function(){f.removeClass(i.playing)}),h.on(o,function(t){w(t),h.on(u,function(t){w(t)})}).on(d,function(){h.unbind(u)}),P.on("click",function(){return f.hasClass(i.mute)?(f.removeClass(i.mute),$.volume=_):(f.addClass(i.mute),_=$.volume,$.volume=0),!1}),C.on(o,function(t){L(t),C.on(u,function(t){L(t)})}).on(d,function(){C.unbind(u)})}else f.addClass(i.mini);v&&f.addClass(i.playing),f.find("."+i.playPause).on("click",function(){return f.hasClass(i.playing)?(t(this).attr("title",e.strPlay).find("a").html(e.strPlay),f.removeClass(i.playing),c?$.pause():$.Stop()):(t(this).attr("title",e.strPause).find("a").html(e.strPause),f.addClass(i.playing),c?$.play():$.Play()),!1}),a.replaceWith(f)}),this}}(jQuery,window,document);